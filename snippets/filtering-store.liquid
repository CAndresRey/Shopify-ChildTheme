{% comment %}
  Render filtering in collections

  Usage:
  {% render 'filtering-store' %}
{% endcomment %}

<div class="filter-wrapper__container">

  <form class="filter-form">

    <div class="filter-form_name">
      <span>{{ 'products.facets.filter_by_label' | t }}</span>
    </div>

    {% comment %} Filter: element filter active for the collections {% endcomment %}
    {%- for filter in collection.filters -%}
      {% comment %} That element open the list {% endcomment %}
      <details class="filter-group">

        {% comment %} Name of the filter element {% endcomment %}
        <summary class="filter-group-summary">
          <div class="filter-group-summary__label">
            <span>{{ filter.label }}</span>
          </div>
        </summary>

        {% comment %} Content element in the  {% endcomment %}
        <div class="filter-group-display display{{ forloop.index }}">
          
          {% comment %} Header of the object {% endcomment %}
          <div class="filter-group-display__header">
              <a 
                href="{{ filter.url_to_remove }}" 
                class="filter-group-display__header-reset"
               >
                {{ 'products.facets.clear_all' | t }}
              </a>
          </div>
          
          {% comment %} Determine the filter type, list, boolean, anymore {% endcomment %}
          {%- case filter.type -%}
          
            {%- when 'boolean' or 'list' -%}
              <ul class="filter-group-display__list">
                {%- for filter_value in filter.values -%}
                  <li class="filter-group-display__list-item">
                    <input type="radio"
                      name="{{ filter_value.param_name }}"
                      value="{{ filter_value.value }}"
                      id="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                      {% if filter_value.active -%}
                        checked
                      {%- endif %}
                      {% if filter_value.count == 0 and filter_value.active == false -%}
                        disabled
                      {%- endif %}
                    >
                    <label 
                      for="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                      class="filter-group-display__list-item--element"
                      >
                      {{ filter_value.label }}
                    </label>
                    
                  </li>
                {%- endfor -%}
              </ul>
              
            {% comment %} Determine the filter type price{% endcomment %}
            {%- when 'price_range' -%}
              <div class="filter-group-display__price-range ">
                <div class="filter-group-display__price-range--element price-after">
                  <span>{{ cart.currency.symbol }}</span>

                  <input name="{{ filter.min_value.param_name }}"
                    id="Filter-{{ filter.min_value.param_name }}"
                    {% if filter.min_value.value -%}
                      value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                    {%- endif %}
                    type="number"
                    placeholder="0"
                    min="0"
                    max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                  >
                </div>

                <label 
                  for="" 
                  class="filter-group-display__price-range--reach"
                  >
                  {{ 'products.facets.to' | t }}
                </label>

                <div class="filter-group-display__price-range--element">
                  <span>{{ cart.currency.symbol }}</span>

                  <input name="{{ filter.max_value.param_name }}"
                    id="Filter-{{ filter.max_value.param_name }}"
                    {% if filter.max_value.value -%}
                      value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                    {%- endif %}
                    type="number"
                    placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                    min="0"
                    max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                  >
                </div>
              </div>

          {%- endcase -%}
        </div>
      </details>
    {%- endfor -%}

    <div class="filter-form_submit">
      <input type="submit" value="{{ 'products.facets.apply' | t }}">
    </div>

  </form>
</div>