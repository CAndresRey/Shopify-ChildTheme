<div class="reviews__header">
  <h3 class="reviews__title">
    {{ section.settings.title }}
  </h3>

  {% if section.settings.icon %}
    {% render "render-image"
      class: "reviews__icon",
      img: section.settings.icon,
      size: "220 300",
      alt: section.settings.icon.alt,
      width: "100",
      height: "100"
    %}
  {% endif %}

  <div class="reviews__header-ratings-wrapper">
    {% assign general_ratings_width = section.settings.ratings | times: 20 %}
    <div class="ratings">
      <div class="empty-stars"></div>
      <div class="full-stars" style="width:{{ general_ratings_width }}%"></div>
    </div>

    <div class="reviews__header-ratings-count">
      {{ section.settings.count }}
    </div>
  </div>

  {% render 'link'
    class: "reviews__header-ratings-link",
    url: section.settings.cta_url,
    content: section.settings.cta_text
  %}
</div>

<div class="swiper">
  <div class="swiper-wrapper">

    {% for block in section.blocks %}
      {% assign rating_width = block.settings.points | times: 20 %}

      <div class="swiper-slide">
        <div class="ratings">
          <div class="empty-stars"></div>
          <div class="full-stars" style="width:{{ rating_width }}%"></div>
        </div>
        <h4 class="reviews__author">
          {{ block.settings.author }}
        </h4>
        <p class="reviews__description">
          {{ block.settings.description }}
        </p>
      </div>

    {% endfor %}

  </div>
  <!-- If we need pagination -->
  <div class="swiper-pagination"></div>

  <!-- If we need navigation buttons -->
  <div class="reviews__button-prev"><</div>
  <div class="reviews__button-next">></div>

  <!-- If we need scrollbar -->
  <div class="swiper-scrollbar"></div>
</div>

{% schema %}
{
  "name": "Reviews",
  "class": "reviews wrapper",
  "tag": "section",
  "settings": [
    {
      "type": "range",
      "id": "ratings",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "General Points Rating",
      "default": 5
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Quisque vestibulum sapien vel metus"
    },
    {
      "type": "image_picker",
      "id": "icon",
      "label": "Main Review Icon"
    },
    {
      "type": "number",
      "id": "count",
      "label": "Number of reviews",
      "default": 123
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Text",
      "default": "See more reviews"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "CTA Link"
    },
    {
      "type": "text",
      "id": "cta_icon",
      "label": "CTA Icon",
      "info": "CTA SVG Icon name in files without extension (Only SVG)"
    }
  ],
  "blocks": [    
    {
      "type": "review",
      "name": "Review Block",
      "settings": [
        {
          "type": "number",
          "id": "points",
          "label": "Stars"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Anonymous"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description",
          "default": "Pellentesque tellus ante, posuere sed diam vel, mattis cursus diam."
        }
      ]
    }
  ],
  "presets": [
     {
       "name": "Reviews Section"
     }
  ]
}
{% endschema %}